# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

"\n        Account model representing authenticated user details\n    "
type AccountModel {
  "\n            Unique identifier for the model instance\n        "
  id: ID!

  "\n            The date and time when the model instance was created\n        "
  createdAt: Date!

  "\n            The date and time when the model instance was last updated\n        "
  updatedAt: Date!

  "\n            Unique username chosen by the user\n        "
  username: String!

  "\n            Email address of the user\n        "
  email: String!

  "\n            Roles assigned to the user\n        "
  roles: [UserRole!]!

  "\n            Current status of the user account\n        "
  status: AccountStatus!
}

"""Available roles for a user."""
enum UserRole {
  """Regular user who can write reviews and rate items. (Default)"""
  REVIEWER

  """User who can create new items (businesses/products). (Default)"""
  CREATOR

  """User with moderation capabilities."""
  MODERATOR

  """Administrator with full access."""
  ADMIN
}

"""Available statuses for an account."""
enum AccountStatus {
  """Account is active and user can log in."""
  ACTIVE

  """Account has been registered but not yet verified their email."""
  PENDING_VERIFICATION

  """Account has been suspended."""
  SUSPENDED
}

"\n        Item model representing an item to rate and review.\n    "
type ItemModel {
  "\n            Unique identifier for the model instance\n        "
  id: ID!

  "\n            The date and time when the model instance was created\n        "
  createdAt: Date!

  "\n            The date and time when the model instance was last updated\n        "
  updatedAt: Date!

  """The title of the item."""
  title: String!

  """A detailed description of the item."""
  description: String!

  """The category the item belongs to."""
  category: String!

  """Tags associated with the item."""
  tags: [String!]!

  """The average rating of the item based on all reviews."""
  averageRating: Float!

  """The ID of the user who created this item."""
  createdBy: ID!

  """Paginated list of reviews for this item."""
  reviews(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5
  ): ReviewPaginationModel!
}

"""Edge type for ItemModel in a paginated list."""
type ItemModelEdge {
  "\n                A cursor for pagination pointing to this specific node.\n            "
  cursor: String!

  "\n                The node of type ItemModel contained in this edge.\n            "
  node: ItemModel!
}

"\n        Paginated model for ItemModel representing a paginated list of items.\n    "
type ItemPaginationModel {
  "\n                List of edges in the current page, each containing a cursor and a node of type ItemModel.\n            "
  edges: [ItemModelEdge!]

  "\n                List of ItemModel nodes in the current page.\n            "
  nodes: [ItemModel!]

  "\n                The total number of items available across all pages.\n            "
  totalCount: Int!

  "\n                Indicates if there are more items available after the current page.\n            "
  hasNextPage: Boolean!
}

"\n        User model extending AccountModel to include user-specific details\n        such as associated items.\n    "
type UserModel {
  "\n            Unique identifier for the model instance\n        "
  id: ID!

  "\n            The date and time when the model instance was created\n        "
  createdAt: Date!

  "\n            The date and time when the model instance was last updated\n        "
  updatedAt: Date!

  "\n            Unique username chosen by the user\n        "
  username: String!

  "\n            Email address of the user\n        "
  email: String!

  "\n            Roles assigned to the user\n        "
  roles: [UserRole!]!

  "\n            Current status of the user account\n        "
  status: AccountStatus!

  """Paginated list of items created by the user."""
  items(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5
  ): ItemPaginationModel!
}

"""Edge type for UserModel in a paginated list."""
type UserModelEdge {
  "\n                A cursor for pagination pointing to this specific node.\n            "
  cursor: String!

  "\n                The node of type UserModel contained in this edge.\n            "
  node: UserModel!
}

"\n        Paginated model for UserModel representing a paginated list of users.\n    "
type UserPaginationModel {
  "\n                List of edges in the current page, each containing a cursor and a node of type UserModel.\n            "
  edges: [UserModelEdge!]

  "\n                List of UserModel nodes in the current page.\n            "
  nodes: [UserModel!]

  "\n                The total number of items available across all pages.\n            "
  totalCount: Int!

  "\n                Indicates if there are more items available after the current page.\n            "
  hasNextPage: Boolean!
}

"\n        Vote model representing a user's vote for a review.\n    "
type VoteModel {
  "\n            Unique identifier for the model instance\n        "
  id: ID!

  "\n            The date and time when the model instance was created\n        "
  createdAt: Date!

  "\n            The date and time when the model instance was last updated\n        "
  updatedAt: Date!

  """The action of the vote (UP or DOWN)."""
  vote: VoteAction!

  """The ID of the user who created this vote."""
  createdBy: String!

  """The ID of the review this vote is for."""
  relatedReview: String!
}

"""Possible actions for voting on a review."""
enum VoteAction {
  """An upvote indicating approval of the review."""
  UP

  """A downvote indicating disapproval of the review."""
  DOWN
}

"""Edge type for VoteModel in a paginated list."""
type VoteModelEdge {
  "\n                A cursor for pagination pointing to this specific node.\n            "
  cursor: String!

  "\n                The node of type VoteModel contained in this edge.\n            "
  node: VoteModel!
}

"\n        Paginated model for VoteModel representing a paginated list of votes.\n    "
type VotePaginationModel {
  "\n                List of edges in the current page, each containing a cursor and a node of type VoteModel.\n            "
  edges: [VoteModelEdge!]

  "\n                List of VoteModel nodes in the current page.\n            "
  nodes: [VoteModel!]

  "\n                The total number of items available across all pages.\n            "
  totalCount: Int!

  "\n                Indicates if there are more items available after the current page.\n            "
  hasNextPage: Boolean!
}

"\n        Review model representing a user's review of an item.\n    "
type ReviewModel {
  "\n            Unique identifier for the model instance\n        "
  id: ID!

  "\n            The date and time when the model instance was created\n        "
  createdAt: Date!

  "\n            The date and time when the model instance was last updated\n        "
  updatedAt: Date!

  """The text content of the review."""
  content: String!

  """The rating score given in the review."""
  rating: Int!

  """The ID of the user who created this review."""
  createdBy: String!

  """The ID of the item this review is for."""
  relatedItem: String!

  """Paginated list of votes for this review."""
  votes(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5
  ): VotePaginationModel!
}

"""Edge type for ReviewModel in a paginated list."""
type ReviewModelEdge {
  "\n                A cursor for pagination pointing to this specific node.\n            "
  cursor: String!

  "\n                The node of type ReviewModel contained in this edge.\n            "
  node: ReviewModel!
}

"\n        Paginated model for ReviewModel representing a paginated list of reviews.\n    "
type ReviewPaginationModel {
  "\n                List of edges in the current page, each containing a cursor and a node of type ReviewModel.\n            "
  edges: [ReviewModelEdge!]

  "\n                List of ReviewModel nodes in the current page.\n            "
  nodes: [ReviewModel!]

  "\n                The total number of items available across all pages.\n            "
  totalCount: Int!

  "\n                Indicates if there are more items available after the current page.\n            "
  hasNextPage: Boolean!
}

"""Date custom scalar type"""
scalar Date

type Query {
  "\n        Find a user by their unique identifier.\n        \n        **Authentication:** Not required (public endpoint)\n        \n        **Authorization:** None\n        \n        **Caching:** Results are cached for improved performance. Subsequent requests for the same user ID may return cached data.\n        \n        **Rate Limiting:** Relaxed throttle applied\n        \n        **Returns:** User details including ID, username, email, roles, account status, reputation score, and creation/update timestamps\n    "
  findUserById(user_id: ID!): UserModel!

  "\n        Find all users with cursor-based pagination.\n        \n        **Authentication:** Not required (public endpoint)\n        \n        **Authorization:** None\n        \n        **Pagination:** Uses cursor-based pagination for efficient data retrieval. Supports limit (1-100) and cursor parameters.\n        \n        **Rate Limiting:** Balanced throttle applied\n        \n        **Returns:** Paginated list of users with edges, nodes, total count, and hasNextPage indicator\n    "
  findAllUsers(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5
  ): UserPaginationModel!

  """Retrieve a paginated list of votes for a specific review."""
  findAllVotesForReview(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5

    """The unique ID of the review for which to fetch votes."""
    reviewId: ID!
  ): VotePaginationModel!

  "Retrieve reviews based on specified filters such as creator or related item.\n    \n    **Authentication:** Not required (public endpoint)\n        \n    **Authorization:** None\n        \n    **Pagination:** Uses cursor-based pagination for efficient data retrieval. Supports limit (1-100) and cursor parameters.\n        \n    **Rate Limiting:** Balanced throttle applied\n        \n    **Returns:** Paginated list of reviews filtered by the provided arguments, including edges, nodes, total count, and hasNextPage indicator\n "
  filterReviews(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5

    """ID of the user who created the review"""
    createdBy: ID

    """ID of the item being reviewed"""
    relatedItem: ID
  ): ReviewPaginationModel!

  "\n        Find an item by its unique identifier.\n        \n        **Authentication:** Not required (public endpoint)\n        \n        **Authorization:** None\n        \n        **Caching:** Results are cached for improved performance. Subsequent requests for the same item ID may return cached data.\n        \n        **Rate Limiting:** Relaxed throttle applied\n        \n        **Returns:** Item details including ID, timestamps, title, description, category, tags, average rating, and creator ID\n    "
  findItemById(item_id: ID!): ItemModel!

  "Retrieve items based on specified filters such as creator, category, or tag.\n    \n    **Authentication:** Not required (public endpoint)\n        \n    **Authorization:** None\n        \n    **Pagination:** Uses cursor-based pagination for efficient data retrieval. Supports limit (1-100) and cursor parameters.\n        \n    **Rate Limiting:** Balanced throttle applied\n        \n    **Returns:** Paginated list of items filtered by the provided arguments, including edges, nodes, total count, and hasNextPage indicator\n "
  filterItems(
    "\n            Cursor for pagination to fetch results after this cursor.\n        "
    cursor: String

    "\n        Number of items to retrieve per page.                \n        - **Minimum value:** 1.\n        - **Maximum value:** 100.\n        "
    limit: Int = 5

    """ID of the user who created the item"""
    createdBy: ID

    """Filter items by category. Minimum length: 3, Maximum length: 40."""
    category: String

    """Filter items by tag. Minimum length: 2, Maximum length: 20."""
    tag: String
  ): ItemPaginationModel!
}

type Mutation {
  "\n        Run the database seeding process with specified options.\n        - Every user reviews every item but their own\n        - Every user upvotes every review (and their own)\n     "
  runSeed(seed_options: SeedInput!): Boolean!

  "\n        Vote on a review by upvoting or downvoting it.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** REVIEWER role required\n        \n        **Account Status Required:** ACTIVE - only users with active accounts can vote on reviews\n        \n        **Effect:** Records the user's vote (upvote or downvote) on a review. If the user has previously voted on the same review with a different vote type, the previous vote is removed and replaced with the new vote. If the user votes with the same vote type again, the operation is idempotent (no change occurs). The review's vote counts (upvotes and downvotes) are automatically updated in a transaction.\n        \n        **Rate Limiting:** Relaxed throttle applied\n        \n        **Returns:** Boolean true upon successful vote recording\n    "
  voteReview(vote_data: CreateVoteInput!): Boolean!

  "\n        Remove a vote from a review.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** REVIEWER role required\n        \n        **Account Status Required:** ACTIVE - only users with active accounts can remove votes\n        \n        **Effect:** Removes the user's vote from a review. The review's vote counts (upvotes and downvotes) are automatically updated in a transaction.\n        \n        **Rate Limiting:** Relaxed throttle applied\n        \n        **Returns:** Boolean true if the vote was removed, false if no vote existed.\n    "
  deleteVote(reviewId: String!): Boolean!

  "\n        Create a new review for an item with a rating and text content.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** All roles allowed (USER, MODERATOR, ADMIN)\n        \n        **Account Status Required:** ACTIVE - only users with active accounts can create reviews\n        \n        **Effect:** Creates a new review with content (10-2000 characters) and rating (0-10) for the specified item. The review is associated with the authenticated user. The item's average rating is recalculated upon review creation.\n        \n        **Rate Limiting:** Relaxed throttle applied\n        \n        **Returns:** The created review with ID, timestamps, content, rating, initial vote count (0), creator ID, and related item ID\n    "
  createReview(review_data: CreateReviewInput!): ReviewModel!

  "\n        Create a new item to be rated and reviewed by the community.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** All roles allowed (USER, MODERATOR, ADMIN)\n        \n        **Account Status Required:** ACTIVE - only users with active accounts can create items\n        \n        **Effect:** Creates a new item with the provided title, description, category, and optional tags. The item is associated with the authenticated user as the creator.\n        \n        **Rate Limiting:** Balanced throttle applied to prevent spam\n        \n        **Returns:** The created item with ID, timestamps, title, description, category, tags, initial average rating (0), and creator ID\n    "
  createItem(item_data: CreateItemInput!): ItemModel!

  "\n        Suspend a user account, preventing them from accessing protected endpoints.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** Restricted to MODERATOR role only\n        \n        **Account Status Required:** ACTIVE - the calling user must have an active account\n        \n        **Effect:** Changes the target user's account status to SUSPENDED, preventing them from accessing most endpoints. Suspended users can still sign in but will have limited access.\n        \n        **Restrictions:** \n        - ADMIN accounts cannot be suspended.\n        - MODERATOR accounts cannot be suspended.\n        \n        **Rate Limiting:** Critical throttle applied\n        \n        **Returns:** Boolean indicating success (true)\n    "
  suspendAccount(user_id: ID!): Boolean!

  "\n        Register a new user account with email and password credentials.\n        \n        **Authentication:** Not required (public endpoint)\n        \n        **Authorization:** None\n        \n        **Account Status:** Creates a new account with PENDING_VERIFICATION status\n        \n        **Roles:** Assigns REVIEWER and CREATOR roles by default\n        \n        **Session:** Upon successful registration, a new user session is created and a session cookie (connect.sid) is set in the response. This cookie is used for authentication in subsequent requests.\n        \n        **Rate Limiting:** Critical throttle applied to prevent abuse\n        \n        **Returns:** Account details including user ID, username, email, roles, account status, and reputation score\n    "
  signUp(user_data: SignUpInput!): AccountModel!

  "\n        Authenticate a user with email and password credentials.\n        \n        **Authentication:** Not required (public endpoint)\n        \n        **Authorization:** None\n        \n        **Account Status:** Any account status can sign in, but access to other operations may be restricted based on status\n        \n        **Session:** Upon successful authentication, a new user session is created and a session cookie (connect.sid) is set in the response. This cookie is used for authentication in subsequent requests.\n        \n        **Session Limits:** Users are subject to a maximum number of concurrent sessions (hard limit). When this limit is reached, new sign-in attempts will be rejected with a \"Maximum sessions reached\" error. Sessions are NOT automatically evicted - users must explicitly sign out of existing sessions before creating new ones.\n        \n        **Rate Limiting:** Critical throttle applied to prevent brute force attacks\n        \n        **Returns:** Account details including user ID, username, email, roles, account status, and reputation score\n    "
  signIn(credentials: SignInInput!): AccountModel!

  "\n        Send an account verification email to the authenticated user's email address.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** All roles allowed (USER, MODERATOR, ADMIN)\n        \n        **Account Status Required:** PENDING_VERIFICATION - only users with pending verification status can request verification\n        \n        **Effect:** Sends a verification email with a confirmation link. Upon successful email verification, the account status is updated to ACTIVE, allowing full access to the platform (creating items, reviews and voting on reviews).\n        \n        **Rate Limiting:** Ultra-critical throttle applied to prevent email spam\n        \n        **Returns:** Boolean indicating success (true)\n    "
  requestAccountVerification: Boolean!

  "\n        Send an account deletion confirmation email to the authenticated user.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** All roles allowed (USER, MODERATOR, ADMIN)\n        \n        **Account Status Required:** Any status (ACTIVE, PENDING_VERIFICATION, SUSPENDED)\n        \n        **Effect:** Sends a confirmation email with a deletion link. The user must confirm the deletion via the email link for the account to be permanently deleted. This is a two-step process for security.\n        \n        **Rate Limiting:** Critical throttle applied to prevent abuse\n        \n        **Returns:** Boolean indicating success (true)\n    "
  requestAccountDeletion: Boolean!

  "\n        Send a sign-out-all confirmation email to the provided address so the holder can remotely terminate every session.\n\n        **Authentication:** Not required (open endpoint)\n\n        **Authorization:** Public (no role or account required)\n\n        **Account Status Required:** ACTIVE or PENDING_VERIFICATION - suspended accounts are ignored for safety\n\n        **Effect:** Queues an email containing a secure link. Following the link invokes the public signOutAll endpoint and clears every session for the associated account.\n\n        **Rate Limiting:** Ultra-critical throttle applied to prevent abuse\n\n        **Returns:** A string confirming the email was queued if the address exists, otherwise the same response is returned to avoid user enumeration\n    "
  requestSignOutAll(input: RequestSignOutAllInput!): String!

  "\n        Sign out the authenticated user from the current session.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** All roles allowed (USER, MODERATOR, ADMIN)\n        \n        **Account Status Required:** Any status (ACTIVE, PENDING_VERIFICATION, SUSPENDED)\n        \n        **Session:** Destroys the current user session on the server and clears the session cookie (connect.sid) from the client. The user will need to sign in again to access protected endpoints.\n        \n        **Effect:** Only signs out from the current session. Other active sessions on different devices/browsers remain active. Use signOutAll to terminate all sessions.\n        \n        **Rate Limiting:** Critical throttle applied\n        \n        **Returns:** Boolean indicating success (true)\n    "
  signOut: Boolean!

  "\n        Sign out the authenticated user from all active sessions across all devices.\n        \n        **Authentication:** Required - user must be authenticated\n        \n        **Authorization:** All roles allowed (USER, MODERATOR, ADMIN)\n        \n        **Account Status Required:** Any status (ACTIVE, PENDING_VERIFICATION, SUSPENDED)\n        \n        **Re-authentication:** Requires the user's password to be provided for security verification before terminating all sessions\n        \n        **Session:** Destroys all active user sessions on the server and clears the session cookie (connect.sid) from the current client. The user will be signed out from all devices and browsers and will need to sign in again.\n        \n        **Effect:** This is a security feature to revoke access from all devices. Useful if the user suspects their account has been compromised or wants to sign out from all locations remotely.\n        \n        **Rate Limiting:** Ultra-critical throttle applied to prevent abuse\n        \n        **Returns:** Boolean indicating success (true)\n    "
  signOutAll(credentials: ReAuthenticationInput!): Boolean!
}

"""Input data required for seeding the database."""
input SeedInput {
  """Number of users to create during the seeding process."""
  users: Int!

  """Number of items to create per user during the seeding process."""
  itemsPerUser: Int!
}

"""Input data required to create a new vote for a review."""
input CreateVoteInput {
  """The action of the vote, either UP or DOWN."""
  vote: VoteAction!

  """The unique ID of the review being voted on."""
  reviewId: String!
}

"""Input data required to create a new review for an item."""
input CreateReviewInput {
  """
  The text content of the review. Minimum length: 10, Maximum length: 2000.
  """
  content: String!

  """The rating score. Minimum: 0, Maximum: 10."""
  rating: Int!

  """The unique ID of the item being reviewed."""
  itemId: String!
}

"""Input type for creating a new item"""
input CreateItemInput {
  """The title of the item. Minimum length: 5, Maximum length: 40."""
  title: String!

  """
  A detailed description of the item. Minimum length: 5, Maximum length: 500.
  """
  description: String!

  """The category of the item. Minimum length: 3, Maximum length: 40."""
  category: String!

  """
  Optional tags for the item. Maximum 10 tags, each between 2-20 characters.
  """
  tags: [String!] = []
}

"""Input data required for user sign-up."""
input SignUpInput {
  "              \n        - **Maximum length:** 30 characters.\n        - **Minimum length:** 3 characters.        \n        "
  username: String!

  "        \n        - **Valid email format.**        \n        "
  email: String!

  "        \n        - **Minimum length:** 8 characters.\n        - **Maximum length:** 60 characters.        \n        "
  password: String!
}

"""Input data required for user sign-in."""
input SignInInput {
  """The email address of the user."""
  email: String!

  """The password of the user."""
  password: String!
}

"""Input type for requesting sign out from all sessions"""
input RequestSignOutAllInput {
  """The email address of the user."""
  email: String!
}

"""Input type for re-authentication using password"""
input ReAuthenticationInput {
  """The password of the user."""
  password: String!
}